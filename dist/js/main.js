(()=>{"use strict";function e({timing:e,draw:t,duration:a}){let r=performance.now();requestAnimationFrame((function o(l){let s=(l-r)/a;s>1&&(s=1);let n=e(s);t(n),s<1&&requestAnimationFrame(o)}))}const t=({formId:e,someElement:t=[]})=>{const a=document.getElementById(e),r=document.createElement("img");r.classList.add("load-img");const o="./images/error-svgrepo-com.svg";r.style.width="50px";try{if(!a)throw new Error("Верните форму на место");a.addEventListener("submit",(e=>{e.preventDefault(),(()=>{const e=new FormData(a),l={},s=a.querySelectorAll("input");var n;a.append(r),e.forEach(((e,t)=>{l[t]=e})),t.forEach((e=>{const t=document.getElementById(e.id);"block"===e.type&&0!=t.textContent?l[e.id]=t.textContent:"input"===e.type&&""!=t.textContent&&(l[e.id]=t.value)})),(e=>{let t=!0;return e.forEach((e=>{e.classList.contains("error")&&(t=!1)})),t})(s)?(r.src="./images/loading-svgrepo-com.svg",(n=l,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))).then((e=>{s.forEach((e=>{r.src="./images/success-svgrepo-com.svg",r.classList.add("active"),e.value=""}))})).then((e=>{setTimeout((()=>{r.remove(),r.classList.remove("active")}),2e3)})).catch((e=>{r.src=o}))):(r.src=o,setTimeout((()=>{r.remove()}),2e3))})()}))}catch(e){console.log(e.message)}};(e=>{const t=document.getElementById("timer-hours"),a=document.getElementById("timer-minutes"),r=document.getElementById("timer-seconds"),o=document.getElementById("timer-days");let l;const s=()=>{let e=(()=>{let e=(new Date("28 november 2022").getTime()-(new Date).getTime())/1e3;return{timeRemaining:e,days:Math.floor(e/3600/24),hours:Math.floor(e/3600%24),minutes:Math.floor(e/60%60),seconds:Math.floor(e%60)}})();return o.textContent=1===e.days.toString().length?"0"+e.days:e.days,t.textContent=1===e.hours.toString().length?"0"+e.hours:e.hours,a.textContent=1===e.minutes.toString().length?"0"+e.minutes:e.minutes,r.textContent=1===e.seconds.toString().length?"0"+e.seconds:e.seconds,e.timeRemaining};s()>0?l=setInterval(s,1e3):(clearInterval(l),o.textContent="00",t.textContent="00",a.textContent="00",r.textContent="00")})(),(()=>{const e=document.querySelector("menu"),t=(e,t)=>{e.preventDefault();const a=t.getAttribute("href").substr(1);document.getElementById(a).scrollIntoView({behavior:"smooth",block:"start"})},a=()=>{e.classList.toggle("active-menu")};document.addEventListener("click",(r=>{switch(!0){case!!r.target.closest(".close-btn"):case!!r.target.closest(".menu"):a();break;case!!r.target.matches("menu>ul>li>a"):a(),t(r,r.target);break;case!!r.target.closest("main>a"):t(r,r.target.closest("main>a")),e.classList.contains("active-menu")&&a();break;case!r.target.closest("menu"):e.classList.contains("active-menu")&&a()}}))})(),(()=>{const t=document.querySelectorAll(".popup-btn"),a=document.querySelector(".popup"),r=a.querySelector(".popup-content");a.style.transform="translateY(100%)",r.style.opacity=0,t.forEach((e=>e.addEventListener("click",(()=>{o()}))));const o=()=>{screen.width>768?e({duration:2e3,timing:e=>e,draw(e){a.style.display="block",a.style.transform=`translateY(${100*(1-e)}%)`,r.style.opacity=e}}):(a.style.transform="",r.style.opacity=1,a.style.display="block")};a.addEventListener("click",(t=>{t.target.closest(".popup-content")&&!t.target.classList.contains("popup-close")||(screen.width>768?e({duration:2e3,timing:e=>e,draw(e){r.style.opacity=1-e,a.style.transform=`translateY(${100*e}%)`,1===e&&(a.style.display="none")}}):(a.style.transform="translateY(100%)",a.style.display="none",r.style.opacity=0))}))})(),document.querySelectorAll("input.calc-item").forEach((e=>{e.addEventListener("input",(()=>{e.value=e.value.replace(/[^\d]/,"")}))})),(()=>{const e=document.querySelectorAll("form input[type=text]"),t=document.querySelectorAll("form input[type=email]"),a=document.querySelectorAll("form input[type=tel]"),r=(document.querySelectorAll(".form-btn"),document.querySelectorAll("form input[name='user_message']")),o=document.querySelectorAll("form input");e.forEach((e=>{e.addEventListener("input",(()=>{e.value=e.value.replace(/[^а-яА-Я\s\-]+/g,"")}))})),r.forEach((e=>{e.addEventListener("input",(()=>{e.value=e.value.replace(/[^а-яА-Я0-9\s\-\,\.\:\;]+/g,"")}))})),t.forEach((e=>{e.addEventListener("input",(()=>{e.value=e.value.replace(/[^a-zA-Z\d\@\-\_\.\!\~\*\']+/g,"")}))})),a.forEach((e=>{e.addEventListener("input",(()=>{e.value=e.value.replace(/[^\d\\(\\)\-\+]+/g,"")}))})),e.forEach((e=>{e.addEventListener("blur",(()=>{e.value=e.value.replace(/[\s]+/g," "),e.value=e.value.replace(/[\-]+/g,"-"),e.value=e.value.replace(/[\s\-]+/g,"-"),e.value=e.value.replace(/^[\s\-]+/g,""),e.value=e.value.replace(/[\s\-]+$/g,""),e.value=e.value.replace(/( |^)[а-яА-Я]/g,(function(e){return e.toUpperCase()}))}))})),r.forEach((e=>{e.addEventListener("blur",(()=>{e.value=e.value.replace(/[\s]+/g," "),e.value=e.value.replace(/[\-]+/g,"-"),e.value=e.value.replace(/[\s\-]+/g,"-"),e.value=e.value.replace(/^[\s\-]+/g,""),e.value=e.value.replace(/[\s\-]+$/g,"")}))})),t.forEach((e=>{e.addEventListener("blur",(()=>{e.value=e.value.replace(/[\-]+/g,"-"),e.value=e.value.replace(/[\s\-]+/g,"-"),e.value=e.value.replace(/^[\s\-]+/g,""),e.value=e.value.replace(/[\s\-]+$/g,"")}))})),a.forEach((e=>{e.addEventListener("blur",(()=>{e.value=e.value.replace(/[\-]+/g,"-"),e.value=e.value.replace(/^[\s\-]+[\s\-]+/g,""),e.value=e.value.replace(/[\s\-]+$/g,""),e.value=e.value.replace(/[\s\-]+/g,"-")}))})),o.forEach((e=>{e.addEventListener("input",(e=>{console.log("Re"),null!==e.target.closest("form")&&(e=>{let t=!0;switch(!0){case e.matches("form input[type=text]"):if(e.value.match(/[a-яA-я]{2}/gi)){e.classList.remove("error");break}t=!1,e.classList.add("error");break;case e.matches("form input[type=email]"):if(e.value.match(/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/gi)){e.classList.remove("error");break}t=!1,e.classList.add("error");break;case e.matches("form input[type=tel]"):e.value.match(/^((\+7|7|8)+\(?([0-9]){3}\)?)(\-?([0-9]){3})(\-?([0-9]){2}){2}$/g)?e.classList.remove("error"):(t=!1,e.classList.add("error"))}})(e.target)}))}))})(),(()=>{const e=document.querySelectorAll(".service-tab"),t=document.querySelector(".service-header"),a=document.querySelectorAll(".service-header-tab");t.addEventListener("click",(t=>{if(t.target.closest(".service-header-tab")){const r=t.target.closest(".service-header-tab");a.forEach(((t,a)=>{t===r?(t.classList.add("active"),e[a].classList.remove("d-none")):(t.classList.remove("active"),e[a].classList.add("d-none"))}))}}))})(),((e,t,a,r,o,l="portfolio-item-active",s="dot-active")=>{const n=document.querySelector(`.${e}`),c=document.querySelectorAll(`.${t}`),u=document.querySelector(`.${a}`),i=[];if(!(e&&t&&a&&r&&o))return;let d,m=0;const v=(e,t,a)=>{e[t].classList.remove(a)},p=(e,t,a)=>{e[t].classList.add(a)},g=()=>{v(c,m,l),v(i,m,s),m++,m===c.length&&(m=0),p(c,m,l),p(i,m,s)},y=e=>{d=setInterval(g,e)};n.addEventListener("click",(e=>{e.preventDefault(),e.target.matches(`.${r}, .${o}`)&&(v(c,m,l),v(i,m,s),e.target.matches("#arrow-right")?m++:e.target.matches("#arrow-left")?m--:e.target.matches(`.${r}`)&&(m=i.indexOf(e.target)),m===c.length&&(m=0),m<0&&(m=c.length-1),p(c,m,l),p(i,m,s))})),n.addEventListener("mouseenter",(e=>{e.target.matches(`.${r}, .${o}`)&&clearInterval(d)}),!0),n.addEventListener("mouseleave",(e=>{e.target.matches(`.${r}, .${o}`)&&y(2e3)}),!0),(()=>{for(let e=0;e<c.length;e++){const t=document.createElement("li");t.classList.add(r),0===e&&t.classList.add(s),i.push(t),u.append(t)}})(),y(2e3)})("portfolio-content","portfolio-item","portfolio-dots","dot","portfolio-btn","portfolio-item-active","dot-active"),((t=100)=>{const a=document.querySelector(".calc-block"),r=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),l=document.querySelector(".calc-count"),s=document.querySelector(".calc-day"),n=document.getElementById("total");let c=0,u=0;a.addEventListener("input",(()=>{(()=>{const a=+r.options[r.selectedIndex].value,i=+o.value,d=1+.1*+l.value,m=s.value?+s.value>=10?1:+s.value>5?1.5:2:1;c=u,u=0,a&&i?(u=Math.round(t*a*i*d*m),console.log(a,i,d,m,u),e({duration:1e3,timing:e=>e,draw(e){n.textContent=u>c?c+parseInt((u-c)*e):u<c?parseInt(c-(c-u)*e):u}})):n.textContent=0})()}))})(100),t({formId:"form1",someElement:[{type:"block",id:"total"}]}),t({formId:"form2",someElement:[{type:"block",id:"total"}]}),t({formId:"form3",someElement:[{type:"block",id:"total"}]})})();